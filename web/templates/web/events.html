{% extends 'web/base.html' %}

{% block content %}

<h1><i class="fad fa-calendar-alt"></i> OE Week Events</h1>

<p><i class="fal fa-hand-pointer"></i> <strong>Please click on a date to expand the details.</strong></p>

<p><i class="fal fa-clock"></i> <strong>current time in UTC: <span style='background-color: #ffffcc;'>{{ current_time_utc | date:'M d, Y H:i' }}</span></strong></p>

{% if event_count %}
    <p><i class="fal fa-calculator"></i> <strong>Showing {{ event_count }} events</strong></p>
{% endif %}

<div class="bg-white border-gray-300 rounded-lg p-2 md:p-4 my-8">

{% for day in days %}
<details>

<summary class="text-2xl font-bold cursor-pointer mb-4">{{ day.1 }}</summary>

<div class="grid gird-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 md:gap-x-4 gap-y-6">
{% for event in event_list %}
{% if event.event_oeweekday == day.0 %}

    {# {{ forloop.counter }} # starting index 1 #}
    {# {{ forloop.counter0 }} # starting index 0 #}
    {# {% if forloop.first %} #}
    {# {% if forloop.last %} #}

    <div class="bg-white mb-2 rounded-lg shadow-sm transition-shadow overflow-hidden hover:shadow-lg border-2 border-gray-200 hover:border-purple-500">
        <!-- Mario's placeholder image. Load custom image when possible -->        
        <div class="item-media">
            {% if event.image_url %}
            <a href="/events/{{event.year}}/{{event.slug}}/"><img src="{{ event.image_url }}" class="object-cover h-150px md:h-120px"></a>
            {% else %}
                {% load static %}
                <a href="/events/{{event.year}}/{{event.slug}}/"><img rel="stylesheet" src="{% static 'web/images/placeholder-event-sm.png' %}" class="mb-4 w-full"></a>
            {% endif %}
        </div>

        <div class="p-4">
            <h3 class="text-base leading-tight mb-2">
                <a href="/events/{{event.year}}/{{event.slug}}/"><span class="hidden">#{{ forloop.counter }}.</span>
                <span class="font-bold">{{ event.title }}</span></a>
            </h3>

            <p class="text-sm mb-1"><i class="fal fa-university"></i> {{ event.institution }}</p>

            {% if event.institution_is_oeg_member %}
            <p class="text-sm mb-1"><i class="fal fa-badge-check"></i><span style="background-color: #ffffcc;"> OEGlobal member<span></p>
            {% endif %}

            <p class="text-sm mb-1"><i class="fal fa-globe-asia"></i> {{event.country }}, {{event.city}}</p>

            <p class="text-sm mb-1" style="color: #999999;">
                {% if event.event_time %}
                    <i class="fal fa-calendar-star"></i> {{ event.event_time|date:'M d, Y H:i' }} <em>({{ event.event_source_timezone }})</em>
                {% else %}
                <i class="fal fa-calendar-exclamation"></i> (no time specified)
                {% endif %}
            </p>
            <p class="text-sm mb-1">
                {% if event.convertedtime %}
                    <i class="fal fa-calendar-star"></i> {{ event.convertedtime|date:'M d, Y H:i' }} <em>({{ event.convertedtimezone }})</em>
                    {% if event.event_offset_in_hours %}
                        <span style="color: #cc0000;">&nbsp;
                        {{ event.event_offset_in_hours }}
                        </span>
                    {% endif %}
                {% endif %}
            </p>
        </div>
    </div>
{% endif %}
{% endfor %}
    </div>

</details>
{% endfor %}

</div>
{% endblock %}
